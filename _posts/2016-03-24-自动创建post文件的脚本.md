---
layout: post
comment: true
permalink: /posts/auto-create-post
title: 自动创建post文件的脚本
tags: jekyll
date: 2016-03-24 01:12:54 +0800
---
在网站的**根目录**创建bat文件，将以下内容复制进去即可。

运行以后，输入一个博文标题，就会自动建立md文件并打开了。  

<!--more-->
```bat
@echo by XUJINKAI
@echo Add a md file to _posts or _drafts
@echo off

:1
set /p fdid=Create a post(1) or draft(2):
if %fdid%==1 set fd=_posts&& goto 2
if %fdid%==2 set fd=_drafts&& goto 2
goto 1
:2
set /p title=Input new post's title: 
set dt=%date:~,4%-%date:~5,2%-%date:~8,2%
set time0=%time: =0%
set hms=%time0:~,2%:%time0:~3,2%:%time0:~6,2%
set file=%dt%-%title%.md
set fpath="%fd%/%file%"

echo --->> %fpath%
echo layout: post>> %fpath%
echo published: true>> %fpath%
echo comment: true>> %fpath%
echo sticky: false>>%fpath%
echo permalink: >> %fpath%
echo title: %title%>> %fpath%
echo tags: >> %fpath%
echo date: %dt% %hms% +0800>> %fpath%
echo --->> %fpath%
echo ^<!--more--^>>> %fpath%

cd %fd%
start "" "%file%"

```

如果电脑区域设置不同，日期格式不同，截取日期会出现问题。  
可以运行`echo %date%`查看本地日期，然后修改脚本相应位置。

另外，上网上找了一下，自动适应日期格式也是可以的，但略微复杂，没有必要。
